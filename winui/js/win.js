/** 
 WINUI v1.0
**/
$(function(){$('input').each(function(){var _this=$(this);var type=_this.attr('type');var name=_this.attr('name');var checkd=_this.is(':checked');switch(type){case'checkbox':ischeckd=checkd==true?'win-form-checked':'';isswitch=checkd==true?'win-form-onswitch':'';switch(_this.data('type')){case'switch':if(_this.data('title')==undefined){_this.after('<div class="win-form-switch '+isswitch+'"><i class="win-icon win-icon-ok"></i></div>')}else{_this.after('<div class="win-form-switch '+isswitch+'"><em>'+_this.data('title').split('/')[0]+'</em><em class="win-left">'+_this.data('title').split('/')[1]+'</em><i class="win-icon win-icon-ok"></i></div>')}break;case'checkbox':_this.after('<div class="win-form-checkbox '+ischeckd+'"><span>'+_this.data('title')+'</span><i class="win-icon win-icon-ok"></i></div>');break;case'checkbox1':_this.after('<div class="win-form-checkbox win-form-checkbox-block '+ischeckd+'"><span>'+_this.data('title')+'</span><i class="win-icon win-icon-ok"></i></div>');break}break;case'radio':ischeckd=checkd==true?'win-form-radioed':'';iscircle=checkd==true?'win-icon-radio':'win-icon-empty-circle';_this.after('<div class="win-form-radio '+ischeckd+'"><i class="win-icon '+iscircle+'"></i><div>'+_this.data('title')+'</div></div>');break}});$('select').each(function(key,val){var _this=$(this);var dd='';var type=_this.data('type');var list=[];$.each(_this.find('option'),function(k,v){list.push($(v).text());dd+='<dd>'+$(v).text()+'</dd>'})if(type=='search'){list=JSON.stringify(list);localStorage.setItem('select-keyword-'+key,list);_this.after('<div class="win-form-select"><div class="win-select-title"><input type="text" data-key="'+key+'" placeholder="带搜索选择框" class="select-keyword win-input win-input-click" /><i class="win-icon win-icon-triangle-d"></i></div><dl class="win-select-body">'+dd+'</dl></div>')}else{_this.after('<div class="win-form-select"><div class="win-select-title"><input type="text" placeholder="请选择" readonly class="win-input" /><i class="win-icon win-icon-triangle-d"></i></div><dl class="win-select-body"> '+dd+'</dl></div>')}})$('.select-keyword').keyup(function(e){var parent=$(this).parents('.win-form-select');var dd_this=parent.find('.win-this');if(e.keyCode==40){if(dd_this.length>0){dd_this.removeClass('win-this');dd_this.next().addClass('win-this')}else{var dd=parent.find('dd');$(dd[0]).addClass('win-this')}}else if(e.keyCode==38){if(dd_this.length>0){dd_this.removeClass('win-this');dd_this.prev().addClass('win-this')}else{var dd=parent.find('dd');$(dd[dd.length-1]).addClass('win-this')}}else if(e.keyCode==13){if(dd_this.length>0){var text=dd_this.text();$(this).val(text)}}else{var keyword=$(this).val();var list=localStorage.getItem('select-keyword-'+$(this).data('key'));if(keyword!=''||list!=undefined){list=JSON.parse(list);parent.find('.win-select-body').html('');var dd='';for(var i=0;i<list.length;i++){if(list[i].indexOf(keyword)>-1){dd+='<dd>'+list[i]+'</dd>'}}parent.find('.win-select-body').html(dd);$('.win-form-select dd').on('click',function(){select_click($(this))})}}})$('.win-form-select dd').on('click',function(){select_click($(this))})function select_click(_this){var text=_this.text();var parent=_this.parents('.win-form-select');var select=parent.prev();parent.find('dd').removeClass('win-this');_this.addClass('win-this');if(select.data('type')=='search'&&text!=''){parent.find('.select-keyword').val(text)}$.each(select.find('option'),function(key,val){if($(val).text()==text){$(val).attr("selected",true)}else{$(val).attr("selected",false)}})$('select').trigger('change')}$('.win-select-title').click(function(e){var parent=$(this).parents('.win-form-select');if($(this).find("i").hasClass('win-icon-triangle-d')){$(this).find("i").removeClass("win-icon-triangle-d").addClass("win-icon-triangle-t");parent.find('.win-select-body').show()}else{$(this).find("i").removeClass("win-icon-triangle-t").addClass("win-icon-triangle-d");parent.find('.win-select-body').hide()}e.stopPropagation();});$('.win-form-checkbox,.win-form-switch').click(function(){var _this=$(this);var prev=_this.prev();var checkd=_this.hasClass('win-form-switch')?'win-form-onswitch':'win-form-checked';if(_this.hasClass(checkd)){$(_this).removeClass(checkd);prev.attr('checked',false)}else{$(_this).addClass(checkd);prev.attr('checked',true)}})$('.win-form-radio').click(function(){var _this=$(this);var prev=_this.prev();var name=_this.attr('name');if(!_this.hasClass('win-form-radioed')){$.each(_this.parents('.win-form-item').find('.win-form-radio'),function(key,val){$(val).prev().attr('checked',false);$(val).removeClass('win-form-radioed');$(val).find('.win-icon').removeClass('win-icon-radio').addClass('win-icon-empty-circle')});$(_this).addClass('win-form-radioed');$(_this).find('.win-icon').removeClass('win-icon-empty-circle').addClass('win-icon-radio');prev.attr('checked',true)}})$(".win-nav-child a").click(function(){$('.win-nav-child a').removeClass('win-this');$(this).addClass('win-this')var url=$(this).data('url');if(typeof(url)=='string'){url=url+'.html';$('iframe').attr('src',url)}});$('.win-nav-item').click(function(){var _this=$(this);if(!_this.hasClass('win-this')){$.each(_this.parents('.win-nav').find('.win-nav-item'),function(key,val){$(val).removeClass('win-this')});$(_this).addClass('win-this')}})$('.win-nav .win-nav-first').children('a').each(function(index){$(this).click(function(){if($('.win-nav-more').eq(index).hasClass('win-icon-down')){$('.win-nav-more').eq(index).removeClass('win-icon-down').addClass('win-icon-up');$('.win-nav-child').eq(index).addClass('win-hide')}else{$('.win-nav-more').eq(index).removeClass('win-icon-up').addClass('win-icon-down');$('.win-nav-child').eq(index).removeClass('win-hide')}})})$('.win-tab-title li').click(function(){var _this=$(this);if(!_this.hasClass('win-this')){$.each(_this.parent('.win-tab-title').find('li'),function(key,val){$(val).removeClass('win-this');$(val).parent().siblings().find('.win-tab-item').removeClass('win-show')});$(_this).addClass('win-this');$(_this).parent().siblings().find('.win-tab-item').eq($(_this).index()).addClass('win-show')}})function resfEl(){contLi=$('.win-tab-close li')contLiActive=$('.win-tab-close .win-this')wrapCont=$('.win-tab-close .win-tab-content')contIndex=$('.win-tab-close .win-tab-content .win-tab-item')contDel=$('.win-tab-close li .win-icon-close')}resfEl();contDel.click(function(){resfEl();contLiActive.index()==$(this).parent().index()?contLi.eq(contLiActive.index()+1).addClass('win-this'):'';contLiActive.index()==contLi.length-1?contLi.eq(contLi.length-2).addClass('win-this'):'';var _this=$(this)parLi=_this.parent().index()_this.parent().remove()contIndex.eq(parLi).remove()resfEl()contIndex.eq(contLiActive.index()).addClass('win-show')})$('.win-nav-search .win-icon-search').click(function(){$(this).addClass('win-hide');$(this).next().removeClass('win-hide');$(this).next().focus()})$('.win-nav-search input').blur(function(){if($(this).val()==''){$(this).addClass('win-hide');$('.win-nav-right .win-icon-search').removeClass('win-hide')}})$(document).click(function(event){event=event||window.event;$('.win-select-body').each(function(index){if($(this).css('display')=='block'){$(this).hide();}})$('.win-select-title i').each(function(index){if($(this).hasClass('win-icon-triangle-t')){$(this).addClass('win-icon-triangle-d');}})});function SetProgress(){$('.win-progress-bar').each(function(index){var percent=$(this).data('percent');if($(this).parent().hasClass('win-progress-drag')){$('.win-progress-circle-btn').css({'left':percent,'opacity':'1'})}if($(this).parent().hasClass('win-progress-steps')){if(parseInt(percent)>0){$('.win-progress-step:first').css('border-color','#23B7E5')}if(parseInt(percent)>=20){$('.win-progress-step1:first').css('border-color','#23B7E5')}if(parseInt(percent)>=40){$('.win-progress-step1').eq(1).css('border-color','#23B7E5')}if(parseInt(percent)>=60){$('.win-progress-step1').eq(2).css('border-color','#23B7E5')}if(parseInt(percent)>=80){$('.win-progress-step1:last').css('border-color','#23B7E5')}if(parseInt(percent)>=100){$('.win-progress-step:last').css('border-color','#23B7E5')}}$(this).animate({width:percent});$('.win-progress-text').eq(index).text(percent).css({'left':percent,'opacity':'1'})})}SetProgress();var scroll=$('.win-progress-drag');var circle=$('.win-progress-circle-btn');var bar=$('.win-progress-drag .win-progress-bar');var barleft=0;circle.each(function(index){$(this).mousedown(function(event){var event=event||window.event;var leftVal=event.clientX-this.offsetLeft;var that=this;document.onmousemove=function(event){var event=event||window.event;barleft=event.clientX-leftVal;if(barleft<0)barleft=0;else if(barleft>scroll.eq(index).width()-circle.width())barleft=scroll.eq(index).width()-circle.width();bar.eq(index).css('width',barleft);that.style.left=barleft+"px";window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}})})document.onmouseup=function(){document.onmousemove=null;}$('.win-progress-circle').each(function(index,el){var num=$(this).find('span').text()*3.6;if(num<=180){$(this).find('.win-pie-circle-right').css('transform',"rotate("+num+"deg)")}else{$(this).find('.win-pie-circle-right').css('transform',"rotate(180deg)");$(this).find('.win-pie-circle-left').css('transform',"rotate("+(num-180)+"deg)")}});$('.win-colla-title').click(function(){var _this=$(this)if(_this.find('i').hasClass('win-icon-right')){$(_this).find('i').removeClass('win-icon-right').addClass('win-icon-down')$(_this).siblings().removeClass('win-hide')}else{$(_this).find('i').removeClass('win-icon-down').addClass('win-icon-right')$(_this).siblings().addClass('win-hide')}})$('.win-collapse-cross .win-colla-item').click(function(){if($(this).find('.win-colla-content p').hasClass('win-hide')){$(this).addClass('win-colla-active');$(this).find('.win-colla-content p').removeClass('win-hide')}else{$(this).find('.win-colla-content p').addClass('win-hide');$(this).removeClass('win-colla-active')}})$('.win-table .win-delete').click(function(){var r=confirm("确定删除吗？")if(r==true){$(this).parent().parent().remove()}})$('.win-table-edit-div').click(function(){var _this=$(this);var tex1=_this.next();if(tex1.css('display')=='none'){_this.css('display','none');tex1.css('display','block').focus();tex1.attr('value',_this.text());tex1.blur(function(){$(this).attr("value",$(this).val())_this.css('display','block');tex1.css('display','none');_this.text($(this).val())})}})});(function(factory){if(typeof define==="function"&&(define.amd||define.cmd)&&!jQuery){define(["jquery"],factory)}else if(typeof module==='object'&&module.exports){module.exports=function(root,jQuery){if(jQuery===undefined){if(typeof window!=='undefined'){jQuery=require('jquery')}else{jQuery=require('jquery')(root)}}factory(jQuery);return jQuery}}else{factory(jQuery)}}(function($){var defaults={totalData:0,showData:0,pageCount:9,current:1,prevCls:'win-page-prev',nextCls:'win-page-next',prevContent:'<i class="win-icon win-icon-prev"></i>',nextContent:'<i class="win-icon win-icon-next"></i>',activeCls:'win-page-curr',coping:false,isHide:false,homePage:'',endPage:'',keepShowPN:false,mode:'unfixed',count:4,jump:false,jumpIptCls:'win-input',jumpBtnCls:'win-jump-btn',jumpBtn:'确定',callback:function(){}};var Pagination=function(element,options){var opts=options,current,$document=$(document),$obj=$(element);this.setPageCount=function(page){return opts.pageCount=page};this.getPageCount=function(){return opts.totalData&&opts.showData?Math.ceil(parseInt(opts.totalData)/opts.showData):opts.pageCount};this.getCurrent=function(){return current};this.filling=function(index){var html='';current=parseInt(index)||parseInt(opts.current);var pageCount=this.getPageCount();switch(opts.mode){case'fixed':html+='<a href="javascript:;" class="'+opts.prevCls+'">'+opts.prevContent+'</a>';if(opts.coping){var home=opts.coping&&opts.homePage?opts.homePage:'1';html+='<a href="javascript:;" data-page="1">'+home+'</a>'}var start=current>opts.count-1?current+opts.count-1>pageCount?current-(opts.count-(pageCount-current)):current-2:1;var end=current+opts.count-1>pageCount?pageCount:start+opts.count;for(;start<=end;start++){if(start!=current){html+='<a href="javascript:;" data-page="'+start+'">'+start+'</a>'}else{html+='<span class="'+opts.activeCls+'">'+start+'</span>'}}if(opts.coping){var _end=opts.coping&&opts.endPage?opts.endPage:pageCount;html+='<a href="javascript:;" data-page="'+pageCount+'">'+_end+'</a>'}html+='<a href="javascript:;" class="'+opts.nextCls+'">'+opts.nextContent+'</a>';break;case'unfixed':if(opts.keepShowPN||current>1){html+='<a href="javascript:;" class="'+opts.prevCls+'">'+opts.prevContent+'</a>'}else{if(opts.keepShowPN==false){$obj.find('.'+opts.prevCls)&&$obj.find('.'+opts.prevCls).remove()}}if(current>=opts.count+2&&current!=1&&pageCount!=opts.count){var home=opts.coping&&opts.homePage?opts.homePage:'1';html+=opts.coping?'<a href="javascript:;" data-page="1">'+home+'</a><span>...</span>':''}var start=(current-opts.count)<=1?1:(current-opts.count);var end=(current+opts.count)>=pageCount?pageCount:(current+opts.count);for(;start<=end;start++){if(start<=pageCount&&start>=1){if(start!=current){html+='<a href="javascript:;" data-page="'+start+'">'+start+'</a>'}else{html+='<span class="'+opts.activeCls+'">'+start+'</span>'}}}if(current+opts.count<pageCount&&current>=1&&pageCount>opts.count){var end=opts.coping&&opts.endPage?opts.endPage:pageCount;html+=opts.coping?'<span>...</span><a href="javascript:;" data-page="'+pageCount+'">'+end+'</a>':''}if(opts.keepShowPN||current<pageCount){html+='<a href="javascript:;" class="'+opts.nextCls+'">'+opts.nextContent+'</a>'}else{if(opts.keepShowPN==false){$obj.find('.'+opts.nextCls)&&$obj.find('.'+opts.nextCls).remove()}}break;case'easy':break;default:}html+=opts.jump?'<span class="win-page-skip">到<input type="text" class="'+opts.jumpIptCls+'">页</span><a href="javascript:;" class="'+opts.jumpBtnCls+'">'+opts.jumpBtn+'</a>':'';$obj.empty().html(html)};this.eventBind=function(){var that=this;var pageCount=that.getPageCount();var index=1;$obj.off().on('click','a',function(){if($(this).hasClass(opts.nextCls)){if($obj.find('.'+opts.activeCls).text()>=pageCount){$(this).addClass('win-page-disabled');return false}else{index=parseInt($obj.find('.'+opts.activeCls).text())+1}}else if($(this).hasClass(opts.prevCls)){if($obj.find('.'+opts.activeCls).text()<=1){$(this).addClass('win-page-disabled');return false}else{index=parseInt($obj.find('.'+opts.activeCls).text())-1}}else if($(this).hasClass(opts.jumpBtnCls)){if($obj.find('.'+opts.jumpIptCls).val()!==''){index=parseInt($obj.find('.'+opts.jumpIptCls).val())}else{return}}else{index=parseInt($(this).data('page'))}that.filling(index);typeof opts.callback==='function'&&opts.callback(that)});$obj.on('input propertychange','.'+opts.jumpIptCls,function(){var $this=$(this);var val=$this.val();var reg=/[^\d]/g;if(reg.test(val))$this.val(val.replace(reg,''));(parseInt(val)>pageCount)&&$this.val(pageCount);if(parseInt(val)===0)$this.val(1);});$document.keydown(function(e){if(e.keyCode==13&&$obj.find('.'+opts.jumpIptCls).val()){var index=parseInt($obj.find('.'+opts.jumpIptCls).val());that.filling(index);typeof opts.callback==='function'&&opts.callback(that)}})};this.init=function(){this.filling(opts.current);this.eventBind();if(opts.isHide&&this.getPageCount()=='1'||this.getPageCount()=='0'){$obj.hide()}else{$obj.show()}};this.init()};$.fn.pagination=function(parameter,callback){if(typeof parameter=='function'){callback=parameter;parameter={}}else{parameter=parameter||{};callback=callback||function(){}}var options=$.extend({},defaults,parameter);return this.each(function(){var pagination=new Pagination(this,options);callback(pagination)})}}));